{"version":3,"sources":["../../../src/commands/config/init.ts"],"sourcesContent":["import { Config } from '@oclif/core';\nimport path from 'node:path';\n\nimport BaseCommand from '../../base-command';\nimport {\n  createUserConfig,\n  getUserConfig,\n  updateUserConfig,\n} from '../../utilities/config.utilities';\n\n/**\n * Handles local user configuration\n *\n * @see https://oclif.io/docs/config\n */\nexport default class InitUserConfig extends BaseCommand {\n  static description = 'Init local .condohub config';\n\n  static examples = [`$ condohub config init`];\n\n  constructor(argv: string[], config: Config) {\n    super(argv, config, { name: 'config:init' });\n  }\n\n  async run() {\n    const { args } = await this.parse(InitUserConfig);\n    const configPath = path.join(this.config.configDir, 'config.json');\n    const userConfigExist = await getUserConfig(this.config);\n\n    if (!userConfigExist) {\n      this.logCommand(`no config.json found in ${configPath}`);\n      const userConfig = await createUserConfig(this.config);\n      this.logCommand(`config.json created successfully`);\n      return;\n    }\n    this.logCommand(`config.json found in ${configPath}`);\n    const userConfig = await updateUserConfig(this.config);\n    this.logCommand(`config.json updated successfully`);\n  }\n}\n"],"names":["InitUserConfig","BaseCommand","description","examples","constructor","argv","config","name","run","args","parse","configPath","path","join","configDir","userConfigExist","getUserConfig","logCommand","userConfig","createUserConfig","updateUserConfig"],"mappings":"AAAA;;;;;AACiB,IAAA,SAAW,kCAAX,WAAW,EAAA;AAEJ,IAAA,YAAoB,kCAApB,oBAAoB,EAAA;AAKrC,IAAA,gBAAkC,WAAlC,kCAAkC,CAAA;AAO1B,MAAMA,cAAc,SAASC,YAAW,QAAA;IACrD,OAAOC,WAAW,GAAG,6BAA6B,CAAC;IAEnD,OAAOC,QAAQ,GAAG;QAAC,CAAC,sBAAsB,CAAC;KAAC,CAAC;IAE7CC,YAAYC,IAAc,EAAEC,MAAc,CAAE;QAC1C,KAAK,CAACD,IAAI,EAAEC,MAAM,EAAE;YAAEC,IAAI,EAAE,aAAa;SAAE,CAAC,CAAC;KAC9C;IAED,MAAMC,GAAG,GAAG;QACV,MAAM,EAAEC,IAAI,CAAA,EAAE,GAAG,MAAM,IAAI,CAACC,KAAK,CAACV,cAAc,CAAC,AAAC;QAClD,MAAMW,UAAU,GAAGC,SAAI,QAAA,CAACC,IAAI,CAAC,IAAI,CAACP,MAAM,CAACQ,SAAS,EAAE,aAAa,CAAC,AAAC;QACnE,MAAMC,eAAe,GAAG,MAAMC,CAAAA,GAAAA,gBAAa,AAAa,CAAA,cAAb,CAAC,IAAI,CAACV,MAAM,CAAC,AAAC;QAEzD,IAAI,CAACS,eAAe,EAAE;YACpB,IAAI,CAACE,UAAU,CAAC,CAAC,wBAAwB,EAAEN,UAAU,CAAC,CAAC,CAAC,CAAC;YACzD,MAAMO,UAAU,GAAG,MAAMC,CAAAA,GAAAA,gBAAgB,AAAa,CAAA,iBAAb,CAAC,IAAI,CAACb,MAAM,CAAC,AAAC;YACvD,IAAI,CAACW,UAAU,CAAC,CAAC,gCAAgC,CAAC,CAAC,CAAC;YACpD,OAAO;SACR;QACD,IAAI,CAACA,UAAU,CAAC,CAAC,qBAAqB,EAAEN,UAAU,CAAC,CAAC,CAAC,CAAC;QACtD,MAAMO,UAAU,GAAG,MAAME,CAAAA,GAAAA,gBAAgB,AAAa,CAAA,iBAAb,CAAC,IAAI,CAACd,MAAM,CAAC,AAAC;QACvD,IAAI,CAACW,UAAU,CAAC,CAAC,gCAAgC,CAAC,CAAC,CAAC;KACrD;CACF;kBAxBoBjB,cAAc"}